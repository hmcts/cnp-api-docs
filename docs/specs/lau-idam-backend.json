{"swagger":"2.0","info":{"description":"Log and Audit IdAM Back-End API, used for auditing IdAM logons.","version":"0.1","title":"LAU IdAM Back-End API","contact":{},"license":{"name":"REFORM Common Components."}},"host":"localhost","basePath":"/","tags":[{"name":"IdAM logon database operations.","description":"Idam Logon Audit Controller"},{"name":"root-controller","description":"Root Controller"}],"paths":{"/":{"get":{"tags":["root-controller"],"summary":"welcome","operationId":"welcomeUsingGET","produces":["*/*"],"responses":{"200":{"description":"OK","schema":{"type":"string"}}}}},"/audit/logon":{"get":{"tags":["GET end-points","IdAM logon database operations."],"summary":"Retrieve login audits","description":"This operation will query and return a list of logins based on the search conditions provided in the URL path.","operationId":"getLogonLogUsingGET","produces":["application/json"],"parameters":[{"name":"Authorization","in":"header","description":"Authorization","required":true,"type":"string","x-example":"Bearer eyJ0eXAiOiJK........."},{"name":"emailAddress","in":"query","description":"Email Address","required":false,"type":"string","x-example":"firstname.lastname@company.com"},{"name":"endTimestamp","in":"query","description":"End Timestamp","required":false,"type":"string","x-example":"2021-08-23 22:20:05"},{"name":"page","in":"query","description":"Page","required":false,"type":"string","x-example":"1"},{"name":"ServiceAuthorization","in":"header","description":"Service Authorization","required":true,"type":"string","x-example":"Bearer eyJ0eXAiOiJK........."},{"name":"size","in":"query","description":"Size","required":false,"type":"string","x-example":"500"},{"name":"startTimestamp","in":"query","description":"Start Timestamp","required":false,"type":"string","x-example":"2021-06-23 22:20:05"},{"name":"userId","in":"query","description":"User ID","required":false,"type":"string","x-example":"3748238"}],"responses":{"200":{"description":"Request executed successfully. Response contains of logon logs","schema":{"$ref":"#/definitions/LogonLogGetResponse"}},"400":{"description":"Missing userId, emailAddress, startTimestamp or endTimestamp parameters.","schema":{"$ref":"#/definitions/LogonLogGetResponse"}},"401":{"description":"Unauthorized","schema":{"$ref":"#/definitions/LogonLogGetResponse"}},"403":{"description":"Forbidden","schema":{"$ref":"#/definitions/LogonLogGetResponse"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/LogonLogGetResponse"}}}},"post":{"tags":["IdAM logon database operations.","POST end-point"],"summary":"Save IdAM logon audits","description":"This operation will persist IdAM logons entries which are posted in the request. Single IdAM LogonAudit per request will be stored in the database.","operationId":"saveLogonLogUsingPOST","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"body","name":"logonLogPostRequest","description":"logonLogPostRequest","required":true,"schema":{"$ref":"#/definitions/LogonLogPostRequest"}},{"name":"ServiceAuthorization","in":"header","description":"Service Authorization","required":true,"type":"string","x-example":"Bearer eyJ0eXAiOiJK........."}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/LogonLogPostResponse"}},"201":{"description":"Created logonLog response - includes id from DB.","schema":{"$ref":"#/definitions/LogonLogPostResponse"}},"400":{"description":"Invalid logon audit","schema":{"$ref":"#/definitions/LogonLogPostResponse"}},"403":{"description":"Forbidden","schema":{"$ref":"#/definitions/LogonLogPostResponse"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/LogonLogPostResponse"}}}}}},"definitions":{"LogonLog":{"type":"object","properties":{"emailAddress":{"type":"string","description":"The email address of the logon user"},"ipAddress":{"type":"string","description":"The client ip address of the logon user"},"loginState":{"type":"string","description":"Idam login state"},"service":{"type":"string","description":"The service the logon user is accessing"},"timestamp":{"type":"string","description":"When the operation took place with microseconds in iso-8601-date-and-time-format"},"userId":{"type":"string","description":"The user on whose behalf the logon took place"}},"title":"LogonLog","description":"Data model for the IdAM logon request"},"LogonLogGetResponse":{"type":"object","properties":{"logonLog":{"type":"array","items":{"$ref":"#/definitions/LogonLog"}},"moreRecords":{"type":"boolean","description":"Indicates whether there are more records beyond the current page in the full result set"},"startRecordNumber":{"type":"integer","format":"int32","description":"The index of the first record out of the full result set provided in the result set"},"totalNumberOfRecords":{"type":"integer","format":"int64","description":"The total number of records in the full result set"}},"title":"LogonLogGetResponse","description":"IdAM Logon GET Response"},"LogonLogPostRequest":{"type":"object","properties":{"logonLog":{"$ref":"#/definitions/LogonLog"}},"title":"LogonLogPostRequest"},"LogonLogPostResponse":{"type":"object","properties":{"logonLog":{"$ref":"#/definitions/LogonLogResponse"}},"title":"LogonLogPostResponse"},"LogonLogResponse":{"type":"object","properties":{"emailAddress":{"type":"string"},"id":{"type":"string"},"ipAddress":{"type":"string"},"loginState":{"type":"string"},"service":{"type":"string"},"timestamp":{"type":"string"},"userId":{"type":"string"}},"title":"LogonLogResponse"}}}
