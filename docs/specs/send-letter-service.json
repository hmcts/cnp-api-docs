{"swagger":"2.0","info":{"description":"Api Documentation","version":"1.0","title":"Api Documentation","termsOfService":"urn:tos","contact":{},"license":{"name":"Apache 2.0","url":"http://www.apache.org/licenses/LICENSE-2.0"}},"host":"localhost","basePath":"/","tags":[{"name":"letter-list-controller","description":"Letter List Controller"},{"name":"pending-letters-controller","description":"Pending Letters Controller"},{"name":"print-letter-controller","description":"Print Letter Controller"},{"name":"reports-controller","description":"Reports Controller"},{"name":"send-letter-controller","description":"Send Letter Controller"},{"name":"stale-letter-controller","description":"Stale Letter Controller"}],"paths":{"/letters":{"get":{"tags":["letter-list-controller"],"summary":"getLetters","operationId":"getLettersUsingGET","produces":["*/*"],"parameters":[{"name":"date","in":"query","description":"date","required":true,"type":"string","format":"date"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/LettersInfoResponse"}}},"deprecated":false},"post":{"tags":["send-letter-controller"],"summary":"Send letter to print and post service","operationId":"sendLetterUsingPOST","consumes":["application/vnd.uk.gov.hmcts.letter-service.in.letter.v3+json"],"produces":["application/json"],"parameters":[{"name":"ServiceAuthorization","in":"header","description":"ServiceAuthorization","required":false,"type":"string"},{"name":"isAsync","in":"query","description":"isAsync","required":false,"type":"string","default":"false"},{"in":"body","name":"letter","description":"letter","required":true,"schema":{"$ref":"#/definitions/LetterWithPdfsAndNumberOfCopiesRequest"}}],"responses":{"200":{"description":"Successfully sent letter","schema":{"$ref":"#/definitions/SendLetterResponse"}},"401":{"description":"Invalid service authorisation header"},"403":{"description":"Service not configured"}},"deprecated":false}},"/letters/v2/{id}":{"get":{"tags":["send-letter-controller"],"summary":"Get letter status with copies requested","operationId":"getLatestLetterStatusUsingGET","produces":["application/json"],"parameters":[{"name":"id","in":"path","description":"id","required":true,"type":"string"}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/LetterStatus"}},"404":{"description":"Letter not found"}},"deprecated":false}},"/letters/{id}":{"get":{"tags":["send-letter-controller"],"summary":"Get letter status","operationId":"getLetterStatusUsingGET","produces":["application/json"],"parameters":[{"name":"check-duplicate","in":"query","description":"check-duplicate","required":false,"type":"string","default":"false"},{"name":"id","in":"path","description":"id","required":true,"type":"string"},{"name":"include-additional-info","in":"query","description":"include-additional-info","required":false,"type":"string","default":"false"}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/LetterStatus"}},"404":{"description":"Letter not found"}},"deprecated":false}},"/pending-letters":{"get":{"tags":["pending-letters-controller"],"summary":"Retrieves letters that were not uploaded to SFTP yet.","operationId":"getPendingLettersUsingGET","produces":["*/*"],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/PendingLettersResponse"}}},"deprecated":false}},"/print-jobs/{id}":{"put":{"tags":["print-letter-controller"],"summary":"Send letter to print and post service","operationId":"printUsingPUT","consumes":["application/vnd.uk.gov.hmcts.letter-service.in.print-job.v1+json"],"produces":["application/json"],"parameters":[{"name":"ServiceAuthorization","in":"header","description":"ServiceAuthorization","required":false,"type":"string"},{"name":"X-Hash","in":"header","description":"X-Hash","required":true,"type":"string"},{"name":"id","in":"path","description":"id","required":true,"type":"string"},{"in":"body","name":"printRequest","description":"printRequest","required":true,"schema":{"$ref":"#/definitions/PrintRequest"}}],"responses":{"200":{"description":"Successfully sent letter","schema":{"$ref":"#/definitions/PrintResponse"}},"400":{"description":"Bad Request"},"401":{"description":"Invalid service authorisation header"},"403":{"description":"Service not configured"}},"deprecated":false}},"/reports/count-summary":{"get":{"tags":["reports-controller"],"summary":"Retrieves uploaded letters count summary report","operationId":"getCountSummaryUsingGET","produces":["application/octet-stream"],"parameters":[{"name":"date","in":"query","description":"date","required":true,"type":"string","format":"date"}],"responses":{"200":{"description":"Successfully generated csv report","schema":{"$ref":"#/definitions/SendLetterResponse"}},"500":{"description":"Error occurred while generating csv report"}},"deprecated":false}},"/stale-letters":{"get":{"tags":["stale-letter-controller"],"summary":"Retrieves stale letters","operationId":"getStaleLettersUsingGET","produces":["application/json"],"responses":{"200":{"description":"Retrieved stale letters","schema":{"$ref":"#/definitions/StaleLetterResponse"}},"500":{"description":"Error occurred while retrieving stale letters"}},"deprecated":false}},"/stale-letters/download":{"get":{"tags":["stale-letter-controller"],"summary":"Downloads file with stale letters","operationId":"getFileWithStaleLettersUsingGET","produces":["application/octet-stream"],"responses":{"200":{"description":"Retrieved stale letters file","schema":{"$ref":"#/definitions/StaleLetterResponse"}},"500":{"description":"Error occurred while retrieving stale letters file"}},"deprecated":false}}},"definitions":{"Doc":{"type":"object","properties":{"content":{"type":"string","format":"byte"},"copies":{"type":"integer","format":"int32"}},"title":"Doc"},"Document":{"type":"object","required":["template","values"],"properties":{"template":{"type":"string","description":"Template to be used to render PDF"},"values":{"type":"object","description":"Template values for the PDF"}},"title":"Document"},"LetterInfo":{"type":"object","properties":{"created_at":{"type":"string","format":"date-time"},"id":{"type":"string","format":"uuid"},"printed_at":{"type":"string","format":"date-time"},"sent_to_print_at":{"type":"string","format":"date-time"},"service":{"type":"string"},"status":{"type":"string"},"type":{"type":"string"}},"title":"LetterInfo"},"LetterRequest":{"type":"object","required":["documents","type"],"properties":{"additional_data":{"type":"object","description":"Optional field where services can store any additional information about the letter"},"documents":{"type":"array","description":"List of documents to be printed. Maximum allowed is 30","items":{"$ref":"#/definitions/Document"}},"type":{"type":"string","description":"Type to be used to print documents"}},"title":"LetterRequest"},"LetterStatus":{"type":"object","properties":{"additional_data":{"type":"object","description":"Additional information about the letter"},"checksum":{"type":"string"},"copies":{"type":"integer","format":"int32"},"created_at":{"type":"string","format":"date-time"},"id":{"type":"string","format":"uuid"},"message_id":{"type":"string","description":"This field is deprecated, please use `checksum` instead"},"printed_at":{"type":"string","format":"date-time"},"sent_to_print_at":{"type":"string","format":"date-time"},"status":{"type":"string"}},"title":"LetterStatus"},"LetterStatusV2":{"type":"object","properties":{"additional_data":{"type":"object","description":"Additional information about the letter"},"checksum":{"type":"string"},"copies":{"type":"integer","format":"int32"},"created_at":{"type":"string","format":"date-time"},"id":{"type":"string","format":"uuid"},"message_id":{"type":"string","description":"This field is deprecated, please use `checksum` instead"},"printed_at":{"type":"string","format":"date-time"},"sent_to_print_at":{"type":"string","format":"date-time"},"status":{"type":"string"}},"title":"LetterStatusV2"},"LetterWithPdfsAndNumberOfCopiesRequest":{"type":"object","required":["type"],"properties":{"additional_data":{"type":"object","description":"Optional field where services can store any additional information about the letter"},"documents":{"type":"array","items":{"$ref":"#/definitions/Doc"}},"type":{"type":"string","description":"Type to be used to print documents"}},"title":"LetterWithPdfsAndNumberOfCopiesRequest"},"LetterWithPdfsRequest":{"type":"object","required":["documents","type"],"properties":{"additional_data":{"type":"object","description":"Optional field where services can store any additional information about the letter"},"documents":{"type":"array","description":"List of base64 encoded pdfs to be printed. Maximum allowed is 30","items":{"type":"array","items":{"type":"integer","format":"int32","minimum":-128,"maximum":127}}},"type":{"type":"string","description":"Type to be used to print documents"}},"title":"LetterWithPdfsRequest"},"LettersInfoResponse":{"type":"object","properties":{"count":{"type":"integer","format":"int32"},"letters":{"type":"array","items":{"$ref":"#/definitions/LetterInfo"}}},"title":"LettersInfoResponse"},"PendingLetter":{"type":"object","properties":{"created_at":{"type":"string","format":"date-time"},"id":{"type":"string","format":"uuid"},"key_fingerprint":{"type":"string"},"service":{"type":"string"}},"title":"PendingLetter"},"PendingLettersResponse":{"type":"object","properties":{"pending_letters":{"type":"array","items":{"$ref":"#/definitions/PendingLetter"}}},"title":"PendingLettersResponse"},"PrintJob":{"type":"object","properties":{"case_id":{"type":"string"},"case_ref":{"type":"string"},"created_at":{"type":"string","format":"date-time"},"documents":{"type":"array","items":{"$ref":"#/definitions/Document"}},"id":{"type":"string","format":"uuid"},"letter_type":{"type":"string"},"printed_at":{"type":"string","format":"date-time"},"sent_to_print_at":{"type":"string","format":"date-time"},"service":{"type":"string"},"status":{"type":"string","enum":["NEW","ENCRYPTED","ZIPPED","PROCESSED"]}},"title":"PrintJob"},"PrintRequest":{"type":"object","required":["type"],"properties":{"case_id":{"type":"string"},"case_ref":{"type":"string"},"documents":{"type":"array","items":{"$ref":"#/definitions/Document"}},"letter_type":{"type":"string"},"type":{"type":"string","description":"Type to be used to print documents"}},"title":"PrintRequest"},"PrintResponse":{"type":"object","properties":{"print_job":{"$ref":"#/definitions/PrintJob"},"upload":{"$ref":"#/definitions/PrintUploadInfo"}},"title":"PrintResponse"},"PrintUploadInfo":{"type":"object","properties":{"manifest_path":{"type":"string"},"sas":{"type":"string"},"upload_to_container":{"type":"string"}},"title":"PrintUploadInfo"},"SendLetterResponse":{"type":"object","properties":{"letter_id":{"type":"string","format":"uuid","description":"Id of the letter sent to print"}},"title":"SendLetterResponse"},"StaleLetter":{"type":"object","properties":{"created_at":{"type":"string","format":"date-time"},"id":{"type":"string","format":"uuid"},"sent_to_print_at":{"type":"string","format":"date-time"},"service":{"type":"string"},"status":{"type":"string"}},"title":"StaleLetter"},"StaleLetterResponse":{"type":"object","properties":{"count":{"type":"integer","format":"int32"},"stale_letters":{"type":"array","items":{"$ref":"#/definitions/StaleLetter"}}},"title":"StaleLetterResponse"}}}
