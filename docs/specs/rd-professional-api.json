{"openapi":"3.0.1","info":{"title":"OpenAPI definition","version":"v0"},"servers":[{"url":"http://rd-professional-api-aat.service.core-compute-aat.internal","description":"Generated server url"}],"paths":{"/refdata/internal/v1/organisations/{orgId}":{"put":{"tags":["organisation-internal-controller"],"summary":"Updates an Organisation","description":"**IDAM Roles to access API** : <br> prd-admin","operationId":"updatesOrganisation","parameters":[{"name":"orgId","in":"path","required":true,"schema":{"pattern":"^[A-Z0-9]{7}$","type":"string"}}],"requestBody":{"description":"organisationCreationRequest","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganisationCreationRequest"}}},"required":true},"responses":{"400":{"description":"If Organisation request sent with null/invalid values for mandatory fields"},"404":{"description":"No Organisation found with the given ID"},"403":{"description":"Forbidden Error: Access denied"},"200":{"description":"Organisation has been updated","content":{"application/json":{"schema":{"type":"string"}}}},"500":{"description":"Internal Server Error"}},"security":[{"ServiceAuthorization":[]},{"Authorization":[]}]},"delete":{"tags":["organisation-internal-controller"],"summary":"Delete an Organisation","description":"**IDAM Roles to access API** : <br> prd-admin","operationId":"deleteOrganisation","parameters":[{"name":"orgId","in":"path","required":true,"schema":{"pattern":"^[A-Z0-9]{7}$","type":"string"}}],"responses":{"400":{"description":"The orgId provided for an organisation is not valid or organisation admin is not in Pending state "},"404":{"description":"Not Found"},"401":{"description":"Unauthorized Error : The requested resource is restricted and requires authentication"},"403":{"description":"Forbidden Error: Access denied"},"500":{"description":"Internal Server Error"},"204":{"description":"A representation of the Deleted organisation","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteOrganisationResponse"}}}}},"security":[{"ServiceAuthorization":[]},{"Authorization":[]}]}},"/refdata/internal/v1/organisations/{orgId}/users/{userId}":{"put":{"tags":["professional-user-internal-controller"],"summary":"Modify the Roles or Status of a User","description":"**IDAM Roles to access API** :<br> prd-admin","operationId":"modifyRolesForExistingUserOfOrganisation","parameters":[{"name":"orgId","in":"path","required":true,"schema":{"pattern":"^[A-Z0-9]{7}$","type":"string"}},{"name":"userId","in":"path","required":true,"schema":{"type":"string"}},{"name":"origin","in":"query","required":false,"schema":{"type":"string","default":"EXUI"}}],"requestBody":{"description":"userProfileUpdatedData","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserProfileUpdatedData"}}},"required":true},"responses":{"201":{"description":"The User's Roles/Status have been modified","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ModifyUserRolesResponse"}}}},"404":{"description":"No Organisation or User found with the given ID"},"403":{"description":"Forbidden Error: Access denied"},"400":{"description":"Invalid request provided"},"500":{"description":"Internal Server Error"},"412":{"description":"One or more of the Roles provided is already assigned to the User"}},"security":[{"ServiceAuthorization":[]},{"Authorization":[]}]}},"/refdata/internal/v1/organisations/{orgId}/pbas":{"put":{"tags":["organisation-internal-controller"],"summary":"Edit the PBAs of an Organisation by Organisation ID","description":"**IDAM Roles to access API** : <br> prd-admin","operationId":"editPaymentAccountsByOrgId","parameters":[{"name":"orgId","in":"path","required":true,"schema":{"pattern":"^[A-Z0-9]{7}$","type":"string"}}],"requestBody":{"description":"pbaEditRequest","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PbaRequest"}}},"required":true},"responses":{"400":{"description":"An invalid request was provided"},"404":{"description":"No Organisation found with the given ID"},"403":{"description":"Forbidden Error: Access denied"},"500":{"description":"Internal Server Error"},"200":{"description":"The Payment Account's have been updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PbaResponse"}}}}},"security":[{"ServiceAuthorization":[]},{"Authorization":[]}]}},"/refdata/internal/v1/organisations/{orgId}/pba/status":{"put":{"tags":["organisation-internal-controller"],"summary":"Review (Accept or Reject) an Organisation's registered PBAs ","description":"**IDAM Roles to access API** : <br> prd-admin","operationId":"updateAnOrganisationsRegisteredPbas","parameters":[{"name":"orgId","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"description":"updatePbaRequest","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdatePbaRequest"}}},"required":true},"responses":{"400":{"description":"An invalid request was provided"},"200":{"description":"Success: The requested PBAs have been successfully Updated - OR - Partial Success: Some of the requested PBAs have been successfully Updated and the invalid ones returned with individual error message","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdatePbaStatusResponse"}}}},"404":{"description":"No Organisation found with the given ID"},"403":{"description":"Forbidden Error: Access denied"},"500":{"description":"Internal Server Error"},"422":{"description":"All requested PBAs failed to update"}},"security":[{"ServiceAuthorization":[]},{"Authorization":[]}]}},"/refdata/internal/v1/organisations/{orgId}/mfa":{"put":{"tags":["organisation-internal-controller"],"summary":"Updates the MFA preference of an Organisation","description":"**IDAM Roles to access API** : <br> prd-admin","operationId":"updateOrgMfaStatus","parameters":[{"name":"orgId","in":"path","required":true,"schema":{"pattern":"^[A-Z0-9]{7}$","type":"string"}}],"requestBody":{"description":"mfaUpdateRequest","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MfaUpdateRequest"}}},"required":true},"responses":{"400":{"description":"An invalid request was provided"},"404":{"description":"No Organisation was found with the given organisationIdentifier"},"200":{"description":"The MFA preference of the organisation has been successfully updated"},"401":{"description":"Unauthorized Error : The requested resource is restricted and requires authentication"},"403":{"description":"Forbidden Error: Access denied"},"500":{"description":"Internal Server Error"}},"security":[{"ServiceAuthorization":[]},{"Authorization":[]}]}},"/refdata/external/v1/organisations/users/{userId}":{"put":{"tags":["professional-external-user-controller"],"summary":"Modify the Roles or Status of a User with the given ID","description":"**IDAM Roles to access API** : <br> pui-user-manager","operationId":"modifyRolesForExistingUserOfExternalOrganisation","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"string"}},{"name":"origin","in":"query","required":false,"schema":{"type":"string","default":"EXUI"}}],"requestBody":{"description":"userProfileUpdatedData","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserProfileUpdatedData"}}},"required":true},"responses":{"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"type":"object"}}}},"201":{"description":"The User's Roles/Status have been modified","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ModifyUserRolesResponse"}}}},"404":{"description":"No User found with the given ID","content":{"application/json":{"schema":{"type":"object"}}}},"400":{"description":"Invalid request provided","content":{"application/json":{"schema":{"type":"object"}}}},"412":{"description":"One or more of the Roles provided is already assigned to the User","content":{"application/json":{"schema":{"type":"object"}}}},"403":{"description":"Forbidden Error: Access denied","content":{"application/json":{"schema":{"type":"object"}}}}},"security":[{"ServiceAuthorization":[]},{"Authorization":[]}]}},"/refdata/internal/v1/organisations":{"get":{"tags":["organisation-internal-controller"],"summary":"Retrieves all Organisations filtered by given Status or one Organisation if ID is given","description":"**IDAM Roles to access API** : <br> prd-admin","operationId":"retrieveOrganisations","parameters":[{"name":"id","in":"query","required":false,"schema":{"pattern":"^[A-Z0-9]{7}$","type":"string"}},{"name":"status","in":"query","required":false,"schema":{"type":"string"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","format":"int32"}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","format":"int32"}}],"responses":{"404":{"description":"No Organisation(s) found with the given ID"},"200":{"description":"Details of one or more Organisations","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganisationsDetailResponse"}}}},"400":{"description":"Invalid request (Status or ID) provided"},"403":{"description":"Forbidden Error: Access denied"},"500":{"description":"Internal Server Error"}},"security":[{"ServiceAuthorization":[]},{"Authorization":[]}]},"post":{"tags":["organisation-internal-controller"],"summary":"Creates an Organisation","description":"**IDAM Roles to access API** : <br> No role restriction","operationId":"createOrganisation","requestBody":{"description":"organisationCreationRequest","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganisationCreationRequest"}}},"required":true},"responses":{"400":{"description":"An invalid request has been provided"},"403":{"description":"Forbidden Error: Access denied"},"500":{"description":"Internal Server Error"},"201":{"description":"The Organisation Identifier of the created Organisation","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganisationResponse"}}}}},"security":[{"ServiceAuthorization":[]}]}},"/refdata/internal/v1/organisations/{orgId}/users/":{"post":{"tags":["organisation-internal-controller"],"summary":"Add a new User to an Organisation","description":"**IDAM Roles to access API** : <br> prd-admin","operationId":"addUserToOrganisation","parameters":[{"name":"orgId","in":"path","required":true,"schema":{"pattern":"^[A-Z0-9]{7}$","type":"string"}}],"requestBody":{"description":"newUserCreationRequest","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewUserCreationRequest"}}},"required":true},"responses":{"400":{"description":"An invalid request was provided"},"429":{"description":"Too many requests for resend invite"},"403":{"description":"Forbidden Error: Access denied"},"409":{"description":"A User already exists with the given Email Address or is already active in SIDAM during resend invite"},"500":{"description":"Internal Server Error"},"201":{"description":"The new User has been added to the Organisation","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewUserResponse"}}}},"404":{"description":"No Organisation found with the given ID to add new User to"}},"security":[{"ServiceAuthorization":[]},{"Authorization":[]}]}},"/refdata/external/v1/organisations":{"get":{"tags":["organisation-external-controller"],"summary":"Retrieves Organisation details of the requesting User","description":"**IDAM Roles to access API**:<br> pui-organisation-manager,<br> pui-finance-manager,<br> pui-case-manager,<br> pui-caa,<br> pui-user-manager","operationId":"retrieveOrganisationUsingOrgIdentifier","parameters":[{"name":"pbaStatus","in":"query","required":false,"schema":{"type":"string"}}],"responses":{"400":{"description":"An invalid ID was provided"},"404":{"description":"No Organisation found with the given ID"},"200":{"description":"Details of an Organisation","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganisationsDetailResponse"}}}},"403":{"description":"Forbidden Error: Access denied"},"500":{"description":"Internal Server Error"}},"security":[{"ServiceAuthorization":[]},{"Authorization":[]}]},"post":{"tags":["organisation-external-controller"],"summary":"Creates an Organisation","description":"**IDAM Roles to access API**: <br> No role restriction","operationId":"createOrganisationUsingExternalController","requestBody":{"description":"organisationCreationRequest","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganisationCreationRequest"}}},"required":true},"responses":{"400":{"description":"An invalid request has been provided"},"403":{"description":"Forbidden Error: Access denied"},"500":{"description":"Internal Server Error"},"201":{"description":"The Organisation Identifier of the created Organisation","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganisationResponse"}}}}},"security":[{"ServiceAuthorization":[]}]}},"/refdata/external/v1/organisations/users/":{"post":{"tags":["organisation-external-controller"],"summary":"Add a new User to an Organisation","description":"**IDAM Roles to access API** :<br> pui-user-manager","operationId":"addUserToOrganisationUsingExternalController","requestBody":{"description":"newUserCreationRequest","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewUserCreationRequest"}}},"required":true},"responses":{"400":{"description":"An invalid request was provided"},"429":{"description":"Too many requests for resend invite"},"403":{"description":"Forbidden Error: Access denied"},"409":{"description":"A User already exists with the given Email Address or is already active in SIDAM during resend invite"},"500":{"description":"Internal Server Error"},"201":{"description":"The new User has been added to the Organisation","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewUserResponse"}}}},"404":{"description":"No Organisation found with the given ID to add new User to"}},"security":[{"ServiceAuthorization":[]},{"Authorization":[]}]}},"/refdata/external/v1/organisations/pba":{"post":{"tags":["organisation-external-controller"],"summary":"Add multiple PBAs associated with their organisation","description":"**IDAM Roles to access API** :<br> pui-finance-manager","operationId":"addPaymentAccountsToOrganisation","requestBody":{"description":"pbaRequest","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PbaRequest"}}},"required":true},"responses":{"403":{"description":"Forbidden Error: Access denied"},"201":{"description":"All PBAs got added successfully or Partial success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddPbaResponse"}}}},"401":{"description":"S2S unauthorised"},"500":{"description":"Internal Server Error"},"400":{"description":"PBA number invalid or Duplicate PBA or Organisation is not active"}},"security":[{"ServiceAuthorization":[]},{"Authorization":[]}]},"delete":{"tags":["organisation-external-controller"],"summary":"Deletes the provided list of payment accounts from the organisation.","description":"**IDAM Roles to access API** : <br> - pui-finance-manager","operationId":"deletePaymentAccountsOfOrganisation","requestBody":{"description":"deletePbaRequest","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PbaRequest"}}},"required":true},"responses":{"404":{"description":"Resource Not Found Error: The Organisation does not exist to delete Payment Accounts from"},"400":{"description":"Bad Request Error: One of the below reasons: <br>- Organisation is not ACTIVE.<br>- No payment accounts passed to be deleted in the request body.<br>- Passed payment account numbers are in an invalid format.<br>-The payment accounts are not associated with users organisation"},"403":{"description":"Forbidden Error: Access denied for either invalid permissions or user is pending"},"401":{"description":"Unauthorized Error : The requested resource is restricted and requires authentication"},"500":{"description":"Internal Server Error"},"204":{"description":"Successfully deleted the list of provided payment accounts from the organisation."}},"security":[{"ServiceAuthorization":[]},{"Authorization":[]}]}},"/refdata/external/v1/organisations/addresses":{"post":{"tags":["organisation-external-controller"],"summary":"Adds contact informations(address details) to organisation","description":"**IDAM Roles to access API** :<br> pui-organisation-manager","operationId":"addContactInformationsToOrganisation","requestBody":{"description":"contactInformationCreationRequests","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ContactInformationCreationRequest"}}}},"required":true},"responses":{"400":{"description":"An invalid request has been provided"},"401":{"description":"Unauthorized Error : The requested resource is restricted and requires authentication"},"403":{"description":"Forbidden Error: Access denied"},"201":{"description":"Created"},"500":{"description":"Internal Server Error"}},"security":[{"ServiceAuthorization":[]},{"Authorization":[]}]},"delete":{"tags":["organisation-external-controller"],"summary":"Deletes the Contact Information Address of an Organisation.","description":"**IDAM Roles to access API** : <br> - pui-organisation-manager","operationId":"deleteMultipleAddressesOfOrganisation","requestBody":{"description":"deleteRequest","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DeleteMultipleAddressRequest"}}}},"required":true},"responses":{"403":{"description":"Forbidden Error: Access denied for either invalid permissions or user is pending"},"404":{"description":"NOT FOUND Error: One of the below reasons: <br>- Organisation does not exist.<br>- Request is empty.<br>- id1, id2 does not exist<br>OR<br>id1, id2 does not belong to given org."},"401":{"description":"Unauthorized Error : The requested resource is restricted and requires authentication"},"204":{"description":"Successfully deleted the list of Contact Information Address of an Organisation."},"500":{"description":"Internal Server Error"},"400":{"description":"Bad Request Error: One of the below reasons: <br>- Request is malformed.<br>- Organisation id is missing.<br>- Organisation should have at least one address."}},"security":[{"ServiceAuthorization":[]},{"Authorization":[]}]}},"/refdata/internal/v1/organisations/{orgId}/users":{"get":{"tags":["professional-user-internal-controller"],"summary":"Retrieves the Users of an Active Organisation based on the showDeleted flag","description":"**IDAM Roles to access API** :<br> prd-admin,<br> prd-aac-system","operationId":"findUsersByOrganisation","parameters":[{"name":"orgId","in":"path","required":true,"schema":{"pattern":"^[A-Z0-9]{7}$","type":"string"}},{"name":"userIdentifier","in":"query","required":false,"schema":{"type":"string"}},{"name":"showDeleted","in":"query","description":"Flag (True/False) to decide whether Deleted Users are included in the response","required":false,"schema":{"type":"string"}},{"name":"returnRoles","in":"query","required":false,"schema":{"type":"boolean","default":true}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","format":"int32"}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","format":"int32"}}],"responses":{"400":{"description":"An invalid Organisation Identifier was provided"},"404":{"description":"No Organisation or Users found with the given ID"},"200":{"description":"List of Professional Users and their details","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ProfessionalUsersEntityResponse"}}}}},"403":{"description":"Forbidden Error: Access denied"},"500":{"description":"Internal Server Error"}},"security":[{"ServiceAuthorization":[]},{"Authorization":[]}]}},"/refdata/internal/v1/organisations/pbas":{"get":{"tags":["organisation-internal-controller"],"summary":"Retrieves an Organisation's Payment Accounts with a User's Email Address","description":"**IDAM Roles to access API** : <br> prd-admin","operationId":"retrievePaymentAccountBySuperUserEmail","responses":{"200":{"description":"The Organisation's associated Payment Accounts","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganisationPbaResponse"}}}},"404":{"description":"No Payment Accounts found with the given Email Address"},"400":{"description":"An invalid Email Address was provided"},"403":{"description":"Forbidden Error: Access denied"},"500":{"description":"Internal Server Error"}},"security":[{"ServiceAuthorization":[]},{"Authorization":[]},{"UserEmail":[]}]}},"/refdata/internal/v1/organisations/pba/{status}":{"get":{"tags":["organisation-internal-controller"],"summary":"Retrieves the list of organisations with particular PBA status","description":"**IDAM Roles to access API** : <br> prd-admin","operationId":"retrieveOrgByPbaStatus","parameters":[{"name":"status","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"400":{"description":"PBA status is not valid"},"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganisationsWithPbaStatusResponse"}}}},"500":{"description":"Internal Server Error"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"}},"security":[{"ServiceAuthorization":[]},{"Authorization":[]}]}},"/refdata/external/v1/organisations/users":{"get":{"tags":["professional-external-user-controller"],"summary":"Retrieves the Users of an Active Organisation based on the showDeleted flag and without roles if returnRoles is False","description":"**IDAM Roles to access API** : \n pui-finance-manager,pui-user-manager,\n pui-organisation-manager,\n pui-case-manager,\n pui-caa","operationId":"findUsersByOrganisation_1","parameters":[{"name":"showDeleted","in":"query","required":false,"schema":{"type":"string"}},{"name":"status","in":"query","required":false,"schema":{"type":"string"}},{"name":"returnRoles","in":"query","required":false,"schema":{"type":"boolean","default":true}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","format":"int32"}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","format":"int32"}},{"name":"userIdentifier","in":"query","required":false,"schema":{"type":"string"}}],"responses":{"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"type":"object"}}}},"401":{"description":"Unauthorized Error : The requested resource is restricted and requires authentication","content":{"application/json":{"schema":{"type":"object"}}}},"200":{"description":"List of Professional Users and their details","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ProfessionalUsersEntityResponse"}}}}},"400":{"description":"An invalid Organisation Identifier was provided","content":{"application/json":{"schema":{"type":"object"}}}},"404":{"description":"No Organisation or Users found with the given ID","content":{"application/json":{"schema":{"type":"object"}}}},"403":{"description":"Forbidden Error: Access denied","content":{"application/json":{"schema":{"type":"object"}}}}},"security":[{"ServiceAuthorization":[]},{"Authorization":[]}]}},"/refdata/external/v1/organisations/users/accountId":{"get":{"tags":["professional-external-user-controller"],"summary":"Retrieves the Status of a User belonging to an Active Organisation with the given Email Address","description":"**IDAM Roles to access API** : \n pui-finance-manager,\n pui-user-manager,\n pui-organisation-manager,\n pui-case-manager,\n caseworker-publiclaw-courtadmin","operationId":"findUserStatusByEmail","parameters":[{"name":"email","in":"query","required":false,"schema":{"type":"string"}}],"responses":{"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewUserResponse"}}}},"200":{"description":"The User Identifier of the User","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewUserResponse"}}}},"404":{"description":"No User belonging to an Active Organisation was found with the given Email Address","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewUserResponse"}}}},"400":{"description":"An invalid Email Address was provided","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewUserResponse"}}}},"403":{"description":"Forbidden Error: Access denied","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewUserResponse"}}}}},"security":[{"ServiceAuthorization":[]},{"Authorization":[]},{"UserEmail":[]}]}},"/refdata/external/v1/organisations/status/{status}":{"get":{"tags":["organisation-external-controller"],"summary":"Retrieves all Active Organisations of requested status for user with minimal e.g. organisationIdentifier, name and contact information if address flag is true","description":"**IDAM Roles to access API** : <br> pui-organisation-manager,<br>pui-finance-manager,<br> pui-case-manager,pui-caa,<br>pui-user-manager,citizen,caseworker","operationId":"retrieveOrganisationsByStatusWithAddressDetailsOptional","parameters":[{"name":"status","in":"path","required":true,"schema":{"type":"string"}},{"name":"address","in":"query","required":false,"schema":{"type":"boolean","default":false}}],"responses":{"404":{"description":"No Organisation found"},"200":{"description":"Successfully retrieved list of all Organisations of requested status with minimal information","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrganisationMinimalInfoResponse"}}}}},"403":{"description":"Forbidden Error: Access denied for either invalid permissions or user is pending"},"401":{"description":"Unauthorized Error : The requested resource is restricted and requires authentication"},"500":{"description":"Internal Server Error"}},"security":[{"ServiceAuthorization":[]},{"Authorization":[]}]}},"/refdata/external/v1/organisations/pbas":{"get":{"tags":["organisation-external-controller"],"summary":"Retrieves an Organisation's Payment Accounts with a User's Email Address","description":"**IDAM Roles to access API** : <br> pui-finance-manager,<br>pui-user-manager,<br> pui-organisation-manager,<br> pui-case-manager","operationId":"retrievePaymentAccountByEmail","responses":{"200":{"description":"The Organisation's associated Payment Accounts","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganisationPbaResponse"}}}},"404":{"description":"No Payment Accounts found with the given Email Address"},"400":{"description":"An invalid Email Address was provided"},"403":{"description":"Forbidden Error: Access denied"},"500":{"description":"Internal Server Error"}},"security":[{"ServiceAuthorization":[]},{"Authorization":[]},{"UserEmail":[]}]}},"/refdata/external/v1/organisations/mfa":{"get":{"tags":["organisation-mfa-status-controller"],"summary":"Retrieves the mfa status of the organisation a user belongs to","description":"**IDAM Roles to access API** : <br> No role restriction","operationId":"retrieveMfaStatusByUserId","parameters":[{"name":"user_id","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"400":{"description":"An invalid request has been provided"},"404":{"description":"The requested user does not exist"},"500":{"description":"Internal Server Error"},"200":{"description":"The mfa status of the organisation the user belongs to","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MfaStatusResponse"}}}}}}},"/":{"get":{"tags":["welcome-controller"],"summary":"Welcome message for the Professional Reference Data API","operationId":"welcome","responses":{"200":{"description":"Welcome message","content":{"application/json":{"schema":{"type":"string"}}}}}}}},"components":{"schemas":{"ContactInformationCreationRequest":{"required":["addressLine1"],"type":"object","properties":{"uprn":{"type":"string"},"addressLine1":{"type":"string"},"addressLine2":{"type":"string"},"addressLine3":{"type":"string"},"townCity":{"type":"string"},"county":{"type":"string"},"country":{"type":"string"},"postCode":{"type":"string"},"dxAddress":{"type":"array","items":{"$ref":"#/components/schemas/DxAddressCreationRequest"}}}},"DxAddressCreationRequest":{"required":["dxExchange","dxNumber"],"type":"object","properties":{"dxNumber":{"pattern":"^(?:DX|NI) \\d{10}+$","type":"string","example":"string"},"dxExchange":{"type":"string"}}},"OrganisationCreationRequest":{"required":["contactInformation","name","superUser"],"type":"object","properties":{"name":{"type":"string"},"status":{"type":"string"},"statusMessage":{"type":"string"},"sraId":{"type":"string"},"sraRegulated":{"type":"string"},"companyNumber":{"type":"string"},"companyUrl":{"type":"string"},"superUser":{"$ref":"#/components/schemas/UserCreationRequest"},"paymentAccount":{"uniqueItems":true,"type":"array","items":{"type":"string"}},"contactInformation":{"type":"array","items":{"$ref":"#/components/schemas/ContactInformationCreationRequest"}}}},"UserCreationRequest":{"required":["firstName","lastName"],"type":"object","properties":{"firstName":{"type":"string"},"lastName":{"type":"string"},"email":{"type":"string"}}},"RoleName":{"type":"object","properties":{"name":{"type":"string"}}},"UserProfileUpdatedData":{"type":"object","properties":{"email":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"},"idamStatus":{"type":"string"},"rolesAdd":{"uniqueItems":true,"type":"array","items":{"$ref":"#/components/schemas/RoleName"}},"rolesDelete":{"uniqueItems":true,"type":"array","items":{"$ref":"#/components/schemas/RoleName"}}}},"ModifyUserRolesResponse":{"type":"object","properties":{"roleAdditionResponse":{"$ref":"#/components/schemas/RoleAdditionResponse"},"roleDeletionResponse":{"type":"array","items":{"$ref":"#/components/schemas/RoleDeletionResponse"}},"statusUpdateResponse":{"$ref":"#/components/schemas/StatusUpdateResponse"}}},"RoleAdditionResponse":{"type":"object","properties":{"idamStatusCode":{"type":"string"},"idamMessage":{"type":"string"}}},"RoleDeletionResponse":{"type":"object","properties":{"roleName":{"type":"string"},"idamStatusCode":{"type":"string"},"idamMessage":{"type":"string"}}},"StatusUpdateResponse":{"type":"object","properties":{"idamStatusCode":{"type":"string"},"idamMessage":{"type":"string"}}},"PbaRequest":{"type":"object","properties":{"paymentAccounts":{"uniqueItems":true,"type":"array","items":{"type":"string"}}}},"PbaResponse":{"type":"object","properties":{"statusCode":{"type":"string"},"statusMessage":{"type":"string"}}},"PbaUpdateRequest":{"type":"object","properties":{"pbaNumber":{"type":"string"},"status":{"type":"string"},"statusMessage":{"type":"string"}}},"UpdatePbaRequest":{"type":"object","properties":{"pbaNumbers":{"type":"array","items":{"$ref":"#/components/schemas/PbaUpdateRequest"}}}},"PbaUpdateStatusResponse":{"type":"object","properties":{"pbaNumber":{"type":"string"},"errorMessage":{"type":"string"}}},"UpdatePbaStatusResponse":{"type":"object","properties":{"message":{"type":"string"},"pbaUpdateStatusResponses":{"type":"array","items":{"$ref":"#/components/schemas/PbaUpdateStatusResponse"}}}},"MfaUpdateRequest":{"required":["mfa"],"type":"object","properties":{"mfa":{"type":"string","enum":["EMAIL","NONE","PHONE","AUTHENTICATOR"]}}},"OrganisationResponse":{"type":"object","properties":{"organisationIdentifier":{"type":"string"}}},"NewUserCreationRequest":{"type":"object","properties":{"firstName":{"type":"string"},"lastName":{"type":"string"},"email":{"type":"string"},"roles":{"type":"array","items":{"type":"string"}},"resendInvite":{"type":"boolean"}}},"NewUserResponse":{"type":"object","properties":{"userIdentifier":{"type":"string"},"idamStatus":{"type":"string"}}},"AddPbaResponse":{"type":"object","properties":{"message":{"type":"string"},"reason":{"$ref":"#/components/schemas/FailedPbaReason"}}},"FailedPbaReason":{"type":"object","properties":{"duplicatePaymentAccounts":{"uniqueItems":true,"type":"array","items":{"type":"string"}},"invalidPaymentAccounts":{"uniqueItems":true,"type":"array","items":{"type":"string"}}}},"ContactInformationResponse":{"type":"object","properties":{"addressId":{"type":"string","format":"uuid"},"uprn":{"type":"string"},"created":{"type":"string","format":"date-time"},"addressLine1":{"type":"string"},"addressLine2":{"type":"string"},"addressLine3":{"type":"string"},"townCity":{"type":"string"},"county":{"type":"string"},"country":{"type":"string"},"postCode":{"type":"string"}}},"OrganisationEntityResponse":{"type":"object","properties":{"name":{"type":"string"},"organisationIdentifier":{"type":"string"},"contactInformation":{"type":"array","items":{"$ref":"#/components/schemas/ContactInformationResponse"}},"status":{"type":"string","enum":["PENDING","ACTIVE","BLOCKED","REVIEW","DELETED"]},"statusMessage":{"type":"string"},"sraId":{"type":"string"},"sraRegulated":{"type":"boolean"},"companyNumber":{"type":"string"},"companyUrl":{"type":"string"},"superUser":{"$ref":"#/components/schemas/SuperUserResponse"},"paymentAccount":{"type":"array","items":{"type":"string"}},"pendingPaymentAccount":{"type":"array","items":{"type":"string"}},"dateReceived":{"type":"string","format":"date-time"},"dateApproved":{"type":"string","format":"date-time"}}},"OrganisationsDetailResponse":{"type":"object","properties":{"organisations":{"type":"array","items":{"$ref":"#/components/schemas/OrganisationEntityResponse"}}}},"SuperUserResponse":{"type":"object","properties":{"firstName":{"type":"string"},"lastName":{"type":"string"},"email":{"type":"string"}}},"ProfessionalUsersEntityResponse":{"type":"object","properties":{"organisationIdentifier":{"type":"string"},"users":{"type":"array","items":{"$ref":"#/components/schemas/ProfessionalUsersResponse"}},"userProfiles":{"type":"array","writeOnly":true,"items":{"$ref":"#/components/schemas/ProfessionalUsersResponse"}}}},"ProfessionalUsersResponse":{"type":"object","properties":{"userIdentifier":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"},"email":{"type":"string"},"idamStatus":{"type":"string"},"roles":{"type":"array","items":{"type":"string"}},"idamStatusCode":{"type":"string"},"idamMessage":{"type":"string"}}},"OrganisationPbaResponse":{"type":"object","properties":{"organisationEntityResponse":{"$ref":"#/components/schemas/OrganisationEntityResponse"}}},"FetchPbaByStatusResponse":{"type":"object","properties":{"pbaNumber":{"type":"string"},"status":{"type":"string"},"statusMessage":{"type":"string"},"dateCreated":{"type":"string"},"dateAccepted":{"type":"string"}}},"OrganisationsWithPbaStatusResponse":{"type":"object","properties":{"organisationIdentifier":{"type":"string"},"status":{"type":"string","enum":["PENDING","ACTIVE","BLOCKED","REVIEW","DELETED"]},"pbaNumbers":{"type":"array","items":{"$ref":"#/components/schemas/FetchPbaByStatusResponse"}},"organisationName":{"type":"string"},"superUser":{"$ref":"#/components/schemas/SuperUserResponse"}}},"OrganisationMinimalInfoResponse":{"type":"object","properties":{"name":{"type":"string"},"organisationIdentifier":{"type":"string"},"contactInformation":{"type":"array","items":{"$ref":"#/components/schemas/ContactInformationResponse"}}}},"MfaStatusResponse":{"type":"object","properties":{"mfa":{"type":"string"}}},"DeleteOrganisationResponse":{"type":"object","properties":{"statusCode":{"type":"integer","format":"int32"},"message":{"type":"string"}}},"DeleteMultipleAddressRequest":{"type":"object","properties":{"addressId":{"type":"string"}}}},"securitySchemes":{"Authorization":{"type":"http","scheme":"bearer","bearerFormat":"JWT"},"UserEmail":{"type":"apiKey","name":"UserEmail","in":"header"},"ServiceAuthorization":{"type":"apiKey","description":"ServiceAuthorization","name":"ServiceAuthorization","in":"header","bearerFormat":"JWT"}}}}
