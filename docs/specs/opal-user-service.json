{"openapi":"3.1.0","info":{"description":"Opal User Service","license":{"name":"MIT","url":"https://opensource.org/licenses/MIT"},"title":"Opal User Service","version":"v0.0.1"},"externalDocs":{"description":"README","url":"https://github.com/hmcts/opal-user-service"},"servers":[{"url":"http://localhost","description":"Generated server url"}],"paths":{"/":{"get":{"operationId":"welcome","responses":{"200":{"content":{"*/*":{"schema":{"type":"string"}}},"description":"OK"}},"tags":["Root Controller"]}},"/internal-user/handle-oauth-code":{"post":{"operationId":"handleOauthCode","parameters":[{"in":"query","name":"code","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"*/*":{"schema":{"$ref":"#/components/schemas/SecurityToken"}}},"description":"OK"}},"summary":"Handles Oauth code for the front end API calls","tags":["Authentication Controller - Internal Users"]}},"/testing-support/launchdarkly/bool/{featureKey}":{"get":{"operationId":"isFeatureEnabled","parameters":[{"in":"path","name":"featureKey","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"*/*":{"schema":{"type":"boolean"}}},"description":"OK"}},"tags":["Testing Support Controller"]}},"/testing-support/launchdarkly/string/{featureKey}":{"get":{"operationId":"getFeatureValue","parameters":[{"in":"path","name":"featureKey","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"*/*":{"schema":{"type":"string"}}},"description":"OK"}},"tags":["Testing Support Controller"]}},"/testing-support/token/parse":{"get":{"operationId":"parseToken","parameters":[{"in":"header","name":"Authorization","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"*/*":{"schema":{"type":"string"}}},"description":"OK"}},"tags":["Testing Support Controller"]}},"/testing-support/token/test-user":{"get":{"operationId":"getToken","responses":{"200":{"content":{"*/*":{"schema":{"$ref":"#/components/schemas/TestingSupportTokenResponse"}}},"description":"OK"}},"summary":"Retrieves the token for default test user","tags":["Testing Support Controller"]}},"/testing-support/token/user":{"get":{"operationId":"getTokenForUser","parameters":[{"in":"header","name":"X-User-Email","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"*/*":{"schema":{"$ref":"#/components/schemas/TestingSupportTokenResponse"}}},"description":"OK"}},"summary":"Retrieves the token for a given user","tags":["Testing Support Controller"]}},"/users/{userId}/state":{"get":{"operationId":"getUserState","parameters":[{"in":"path","name":"userId","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserStateDto"}}},"description":"OK"}},"tags":["user-permissions-controller"]}}},"components":{"schemas":{"BusinessUnitUser":{"type":"object","properties":{"businessUnitId":{"type":"integer","format":"int32"},"businessUnitUserId":{"type":"string"},"business_unit_id":{"type":"integer","format":"int32","writeOnly":true},"business_unit_user_id":{"type":"string","writeOnly":true},"permissions":{"type":"array","items":{"$ref":"#/components/schemas/Permission"},"uniqueItems":true}}},"BusinessUnitUserDto":{"type":"object","properties":{"business_unit_id":{"type":"integer","format":"int32"},"business_unit_user_id":{"type":"string"},"permissions":{"type":"array","items":{"$ref":"#/components/schemas/PermissionDto"}}}},"Permission":{"type":"object","properties":{"permissionId":{"type":"integer","format":"int64"},"permissionName":{"type":"string"},"permission_id":{"type":"integer","format":"int64","writeOnly":true},"permission_name":{"type":"string","writeOnly":true}}},"PermissionDto":{"type":"object","properties":{"permission_id":{"type":"integer","format":"int64"},"permission_name":{"type":"string"}}},"SecurityToken":{"type":"object","properties":{"access_token":{"type":"string"},"user_state":{"$ref":"#/components/schemas/UserState"}}},"TestingSupportTokenResponse":{"type":"object","properties":{"access_token":{"type":"string"}}},"UserState":{"type":"object","properties":{"businessUnitUser":{"type":"array","items":{"$ref":"#/components/schemas/BusinessUnitUser"},"uniqueItems":true},"business_unit_user":{"type":"array","items":{"$ref":"#/components/schemas/BusinessUnitUser"},"uniqueItems":true,"writeOnly":true},"userId":{"type":"integer","format":"int64"},"userName":{"type":"string"},"user_id":{"type":"integer","format":"int64","writeOnly":true},"user_name":{"type":"string","writeOnly":true}}},"UserStateDto":{"type":"object","properties":{"business_unit_users":{"type":"array","items":{"$ref":"#/components/schemas/BusinessUnitUserDto"}},"name":{"type":"string"},"status":{"type":"string"},"user_id":{"type":"integer","format":"int64"},"username":{"type":"string"},"version":{"type":"integer","format":"int32"}}}}}}
