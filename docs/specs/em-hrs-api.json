{"openapi":"3.1.0","info":{"title":"HRS Api","description":"HRS handlers","version":"v0.0.1"},"servers":[{"url":"http://localhost","description":"Generated server url"}],"tags":[{"name":"HearingRecordings Service","description":"Endpoint for managing HearingRecordings."},{"name":"HearingRecordings Folder Service","description":"Endpoint for managing HearingRecordings Folder."}],"paths":{"/sharees":{"post":{"tags":["HearingRecordings Service"],"summary":"Create permissions record","description":"Create permissions record to the specified hearing recording and notify user with the link to the resource via email","operationId":"shareHearingRecording","parameters":[{"name":"serviceauthorization","in":"header","description":"Service Authorization (S2S Bearer token)","required":true,"schema":{"type":"string"}},{"name":"Authorization","in":"header","description":"Authorization (Idam Bearer token)","required":true,"schema":{"type":"string"}},{"name":"authorization","in":"header","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CallbackRequest"}}},"required":true},"responses":{"200":{"description":"Return the location of the resource being granted access to (the download link)"},"401":{"description":"Unauthorized"},"404":{"description":"Not Found"},"500":{"description":"Internal Server Error"}}}},"/segments":{"post":{"tags":["HearingRecordings Service"],"summary":"Post hearing recording segment","description":"Save hearing recording segment","operationId":"createHearingRecording","parameters":[{"name":"serviceauthorization","in":"header","description":"Service Authorization (S2S Bearer token)","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HearingRecordingDto"}}},"required":true},"responses":{"202":{"description":"Request accepted for asynchronous processing"},"429":{"description":"Request rejected - too many pending requests"},"500":{"description":"Internal Server Error"}}}},"/hearing-recordings/{recordingId}/segments/{segment}":{"get":{"tags":["HearingRecordings Service"],"summary":"Get hearing recording file","description":"Return hearing recording file from the specified folder","operationId":"getSegmentBinary","parameters":[{"name":"serviceauthorization","in":"header","description":"Service Authorization (S2S Bearer token)","required":true,"schema":{"type":"string"}},{"name":"Authorization","in":"header","description":"Authorization (Idam Bearer token)","required":true,"schema":{"type":"string"}},{"name":"recordingId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"segment","in":"path","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"200":{"description":"Return the requested hearing recording segment"},"401":{"description":"Unauthorized"}}}},"/hearing-recordings/{recordingId}/segments/{segment}/sharee":{"get":{"tags":["HearingRecordings Service"],"summary":"Get hearing recording file","description":"Return hearing recording file from the specified folder","operationId":"getSegmentBinaryForSharee","parameters":[{"name":"serviceauthorization","in":"header","description":"Service Authorization (S2S Bearer token)","required":true,"schema":{"type":"string"}},{"name":"Authorization","in":"header","description":"Authorization (Idam Bearer token)","required":true,"schema":{"type":"string"}},{"name":"recordingId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"segment","in":"path","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"200":{"description":"Return the requested hearing recording segment"},"401":{"description":"Unauthorized"}}}},"/hearing-recordings/{recordingId}/file/{fileName}/sharee":{"get":{"tags":["HearingRecordings Service"],"summary":"Get hearing recording file","description":"Return hearing recording file from the specified folder","operationId":"getSegmentBinaryForShareeByFileName","parameters":[{"name":"serviceauthorization","in":"header","description":"Service Authorization (S2S Bearer token)","required":true,"schema":{"type":"string"}},{"name":"Authorization","in":"header","description":"Authorization (Idam Bearer token)","required":true,"schema":{"type":"string"}},{"name":"recordingId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"fileName","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Return the requested hearing recording segment"},"401":{"description":"Unauthorized"}}}},"/hearing-recordings/{recordingId}/file/{folderName}/{fileName}/sharee":{"get":{"tags":["HearingRecordings Service"],"summary":"Get hearing recording file","description":"Return hearing recording file from the specified folder","operationId":"getSegmentBinaryForShareeByFileName_1","parameters":[{"name":"serviceauthorization","in":"header","description":"Service Authorization (S2S Bearer token)","required":true,"schema":{"type":"string"}},{"name":"Authorization","in":"header","description":"Authorization (Idam Bearer token)","required":true,"schema":{"type":"string"}},{"name":"recordingId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"folderName","in":"path","required":true,"schema":{"type":"string"}},{"name":"fileName","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Return the requested hearing recording segment"},"401":{"description":"Unauthorized"}}}},"/hearing-recordings/{recordingId}/file/{folderName}/{fileName}":{"get":{"tags":["HearingRecordings Service"],"summary":"Get hearing recording file","description":"Return hearing recording file","operationId":"getSegmentBinaryByFileName","parameters":[{"name":"serviceauthorization","in":"header","description":"Service Authorization (S2S Bearer token)","required":true,"schema":{"type":"string"}},{"name":"Authorization","in":"header","description":"Authorization (Idam Bearer token)","required":true,"schema":{"type":"string"}},{"name":"recordingId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"folderName","in":"path","required":true,"schema":{"type":"string"}},{"name":"fileName","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Return the requested hearing recording"},"401":{"description":"Unauthorized"}}}},"/hearing-recordings/{recordingId}/file/{fileName}":{"get":{"tags":["HearingRecordings Service"],"summary":"Get hearing recording file","description":"Return hearing recording file","operationId":"getSegmentBinaryByFileName_1","parameters":[{"name":"serviceauthorization","in":"header","description":"Service Authorization (S2S Bearer token)","required":true,"schema":{"type":"string"}},{"name":"Authorization","in":"header","description":"Authorization (Idam Bearer token)","required":true,"schema":{"type":"string"}},{"name":"recordingId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"fileName","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Return the requested hearing recording"},"401":{"description":"Unauthorized"}}}},"/folders/{name}":{"get":{"tags":["HearingRecordings Folder Service"],"summary":"Get recording file names","description":"Retrieve recording file names for a given folder","operationId":"getFilenames","parameters":[{"name":"serviceauthorization","in":"header","description":"Service Authorization (S2S Bearer token)","required":true,"schema":{"type":"string"}},{"name":"name","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Names of successfully stored recording files","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RecordingFilenameDto"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RecordingFilenameDto"}}}}}}},"/":{"get":{"tags":["welcome-controller"],"operationId":"welcome","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}}}}}},"/delete":{"delete":{"tags":["HearingRecordings Service"],"summary":"Delete hearing recordings","description":"Delete hearing recordings for a given list of CCD case IDs","operationId":"deleteCaseHearingRecordings","parameters":[{"name":"serviceauthorization","in":"header","description":"Service Authorization (S2S Bearer token)","required":true,"schema":{"type":"string"}},{"name":"Authorization","in":"header","description":"Authorization (Idam Bearer token)","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"array","items":{"type":"integer","format":"int64"}}}},"required":true},"responses":{"204":{"description":"Successful deletion"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"}}}}},"components":{"schemas":{"CallbackRequest":{"type":"object","properties":{"case_details":{"$ref":"#/components/schemas/CaseDetails"},"case_details_before":{"$ref":"#/components/schemas/CaseDetails"},"event_id":{"type":"string"}}},"CaseDetails":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"jurisdiction":{"type":"string"},"state":{"type":"string"},"version":{"type":"integer","format":"int32"},"case_type_id":{"type":"string"},"created_date":{"type":"string","format":"date-time"},"last_modified":{"type":"string","format":"date-time"},"locked_by_user_id":{"type":"integer","format":"int32"},"security_level":{"type":"integer","format":"int32"},"case_data":{"type":"object","additionalProperties":{}},"security_classification":{"type":"string","enum":["PUBLIC","PRIVATE","RESTRICTED"]},"callback_response_status":{"type":"string"}}},"HearingRecordingDto":{"type":"object","properties":{"folder":{"type":"string"},"caseRef":{"type":"string"},"recordingSource":{"type":"string","enum":["CVP","VH"]},"hearingRoomRef":{"type":"string"},"serviceCode":{"type":"string"},"jurisdictionCode":{"type":"string"},"courtLocationCode":{"type":"string"},"recordingRef":{"type":"string"},"sourceBlobUrl":{"type":"string"},"urlDomain":{"type":"string"},"filename":{"type":"string"},"filenameExtension":{"type":"string"},"fileSize":{"type":"integer","format":"int64"},"segment":{"type":"integer","format":"int32"},"checkSum":{"type":"string"},"interpreter":{"type":"string"},"recordingDateTime":{"type":"string","format":"date-time"}}},"RecordingFilenameDto":{"type":"object","properties":{"folderName":{"type":"string"},"filenames":{"type":"array","items":{"type":"string"},"uniqueItems":true}}}}}}
