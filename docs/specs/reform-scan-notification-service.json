{"openapi":"3.0.1","info":{"title":"Error Notification Service","description":"API consuming Azure ServiceBus messages and publishing error messages to the scan supplier","license":{"name":"MIT","url":"https://opensource.org/licenses/MIT"},"version":"1"},"servers":[{"url":"http://localhost","description":"Generated server url"}],"tags":[{"name":"Information on notifications","description":"Endpoint for notifications present for this service"}],"paths":{"/notifications":{"get":{"tags":["Information on notifications"],"summary":"Get list of error notifications","description":"Get list of error notifications for specific date","operationId":"getNotifications_1_1","parameters":[{"name":"file_name","in":"query","description":"File name to look up","required":true,"schema":{"type":"string"},"example":"2000000000000_24-06-2020-12-28-19.example.zip"},{"name":"ServiceAuthorization","in":"header","required":false,"schema":{"type":"string"}},{"name":"zip_file_name","in":"query","description":"File name to look-up notifications","required":true,"schema":{"type":"string"},"example":"2022304020414_17-08-2020-11-19-12.zip"},{"name":"date","in":"query","description":"Date boundary to look-up notifications in","required":true,"schema":{"type":"string","format":"date"},"example":"2020-06-24"}],"responses":{"401":{"description":"Unauthenticated / Invalid token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotificationsResponse"}}}},"500":{"description":"Error getting data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotificationsResponse"}}}},"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotificationsResponse"}}}}}}},"/notifications/all-pending":{"get":{"tags":["Information on notifications"],"summary":"Get list of error notifications","description":"Get list of all pending notifications","operationId":"getAllPendingNotifications","responses":{"401":{"description":"Unauthenticated / Invalid token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotificationsResponse"}}}},"500":{"description":"Error validating service header","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotificationsResponse"}}}},"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotificationsResponse"}}}}}}}},"components":{"schemas":{"NotificationInfo":{"title":"List of notifications","type":"object","properties":{"id":{"title":"Notification internal ID","type":"string","description":"Autogenerated DB ID"},"confirmation_id":{"title":"Notification external ID","type":"string","description":"ID received from third party"},"zip_file_name":{"title":"Zip file name","type":"string"},"po_box":{"title":"PO box","type":"string"},"container":{"title":"Origin of zip_file_name","type":"string","description":"Container origin of zip_file_name"},"service":{"title":"File name representing service","type":"string"},"document_control_number":{"title":"Related DCN number","type":"string","description":"Related DNC number (if applicable)"},"error_code":{"title":"Error code","type":"string","description":"Agreed error code"},"error_description":{"title":"Error description","type":"string","description":"Error description"},"created_at":{"title":"Created at","type":"string","description":"Time when notification was created","format":"date-time"},"processed_at":{"title":"Processed at","type":"string","description":"Time when notification was persisted to third party","format":"date-time"},"status":{"title":"End state","type":"string","description":"Current end state of the notification"}},"description":"Full list of notifications found"},"NotificationsResponse":{"type":"object","properties":{"count":{"title":"Notification count","type":"integer","description":"Number of notifications found","format":"int32"},"pendingNotificationsCount":{"title":"Pending Notifications count","type":"integer","description":"Number of notifications with 'Pending' status","format":"int32"},"sentNotificationsCount":{"title":"Sent Notification count","type":"integer","description":"Number of notifications with 'Sent' status","format":"int32"},"notifications":{"title":"List of notifications","type":"array","description":"Full list of notifications found","items":{"$ref":"#/components/schemas/NotificationInfo"}}}}}}}
