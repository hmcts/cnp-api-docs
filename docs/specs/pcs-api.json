{"openapi":"3.1.0","info":{"description":"pcs api","license":{"name":"MIT","url":"https://opensource.org/licenses/MIT"},"title":"pcs api","version":"v0.0.1"},"externalDocs":{"description":"README","url":"https://github.com/hmcts/pcs-api"},"servers":[{"url":"http://localhost","description":"Generated server url"}],"security":[{"AuthorizationToken":[],"ServiceAuthorization":[]}],"tags":[{"description":"Validate access code and link user ID to party","name":"Access Code Validation"}],"paths":{"/":{"get":{"operationId":"welcome","responses":{"200":{"content":{"*/*":{"schema":{"type":"string"}}},"description":"OK"}},"tags":["root-controller"]}},"/cases/{caseReference}/validate-access-code":{"post":{"description":"Stores the user's IDAM user ID for the matching party","operationId":"validateAccessCode","parameters":[{"description":"The 12-digit case reference number","in":"path","name":"caseReference","required":true,"schema":{"type":"integer","format":"int64"}},{"description":"Bearer token for user authentication","in":"header","name":"Authorization","required":true,"schema":{"type":"string"}},{"description":"Service-to-Service (S2S) authorization token","in":"header","name":"ServiceAuthorization","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidateAccessCodeRequest"}}},"required":true},"responses":{"200":{"description":"Successful validation and linking"},"400":{"description":"Invalid access code for this case"},"401":{"description":"Invalid access token"},"403":{"description":"Invalid Service Authorization"},"404":{"description":"Case not found or party does not belong to this case"},"409":{"description":"Access code already used by another user"}},"security":[{"AuthorizationToken":[]},{"ServiceAuthorization":[]}],"summary":"Validate access code and link user to a case","tags":["Access Code Validation"]}},"/dashboard/{caseReference}/notifications":{"get":{"operationId":"getNotificationsForCase","parameters":[{"in":"path","name":"caseReference","required":true,"schema":{"type":"integer","format":"int64"}},{"in":"header","name":"ServiceAuthorization","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DashboardNotification"}}}},"description":"Request successful"},"401":{"description":"Access token is missing or invalid"},"403":{"description":"Not authorised to use the endpoint"},"404":{"description":"Case reference not found"}},"summary":"Get the active dashboard notifications for a case","tags":["Dashboard"]}},"/dashboard/{caseReference}/tasks":{"get":{"operationId":"getTasksForCase","parameters":[{"in":"header","name":"ServiceAuthorization","required":true,"schema":{"type":"string"}},{"description":"The unique identifier of the case to fetch tasks for","in":"path","name":"caseReference","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TaskGroup"}}}},"description":"Request successful"},"401":{"description":"Access token is missing or invalid"},"403":{"description":"Not authorised to use the endpoint"},"404":{"description":"Case reference not found"}},"summary":"Get the tasks associated with the dashboard for a case","tags":["Dashboard"]}},"/hearing/":{"post":{"operationId":"createHearing","parameters":[{"in":"header","name":"Authorization","required":true,"schema":{"type":"string"}},{"in":"header","name":"ServiceAuthorization","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HearingRequest"}}},"required":true},"responses":{"200":{"content":{"*/*":{"schema":{"$ref":"#/components/schemas/HearingResponse"}}},"description":"OK"}},"tags":["Hearings"]}},"/hearing/{id}":{"delete":{"operationId":"deleteHearing","parameters":[{"in":"header","name":"Authorization","required":true,"schema":{"type":"string"}},{"in":"header","name":"ServiceAuthorization","required":true,"schema":{"type":"string"}},{"in":"path","name":"id","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteHearingRequest"}}},"required":true},"responses":{"200":{"content":{"*/*":{"schema":{"$ref":"#/components/schemas/HearingResponse"}}},"description":"OK"}},"tags":["Hearings"]},"get":{"operationId":"getHearing","parameters":[{"in":"header","name":"Authorization","required":true,"schema":{"type":"string"}},{"in":"header","name":"ServiceAuthorization","required":true,"schema":{"type":"string"}},{"in":"path","name":"id","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"*/*":{"schema":{"$ref":"#/components/schemas/GetHearingsResponse"}}},"description":"OK"}},"tags":["Hearings"]},"put":{"operationId":"updateHearing","parameters":[{"in":"header","name":"Authorization","required":true,"schema":{"type":"string"}},{"in":"header","name":"ServiceAuthorization","required":true,"schema":{"type":"string"}},{"in":"path","name":"id","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateHearingRequest"}}},"required":true},"responses":{"200":{"content":{"*/*":{"schema":{"$ref":"#/components/schemas/HearingResponse"}}},"description":"OK"}},"tags":["Hearings"]}},"/testing-support/claim-eligibility":{"get":{"description":"Checks the eligibility for a given property postcode, and returns a payload with an eligibility status.","operationId":"getPostcodeEligibility","parameters":[{"description":"Service-to-Service (S2S) authorization token","example":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...","in":"header","name":"ServiceAuthorization","required":true,"schema":{"type":"string"}},{"description":"Property postcode to check eligibility for","in":"query","name":"postcode","required":true,"schema":{"type":"string"}},{"description":"Legislative country for property, (for use with cross border postcodes)","in":"query","name":"legislativeCountry","required":false,"schema":{"type":"string","enum":["England","Northern Ireland","Scotland","Wales","Isle of Man","Channel Islands"]}}],"responses":{"200":{"content":{"application/json":{"examples":{"Eligible postcode":{"description":"Result for a match with an eligible postcode","value":{"status":"ELIGIBLE","epimsId":12345,"legislativeCountry":"England"}},"Ineligible postcode":{"description":"Result for a match with an ineligible postcode","value":{"status":"NOT_ELIGIBLE","epimsId":45678,"legislativeCountry":"Wales"}},"Multiple matches found for postcode":{"description":"Multiple matches found in the DB for the provided postcode.","value":{"status":"MULTIPLE_MATCHES_FOUND"}},"No match found for postcode":{"description":"No match found in the DB for the provided postcode.","value":{"status":"NO_MATCH_FOUND"}},"Postcode that is cross-border":{"description":"Result for a match with a cross border postcode, that needs the legistalative country to be specified as well","value":{"status":"LEGISLATIVE_COUNTRY_REQUIRED","legislativeCountries":["England","Wales"]}}}}},"description":"Eligibilty check completed successfully"},"400":{"description":"Missing or blank postcode query parameter"},"401":{"description":"Unauthorized - Invalid or missing authorization token"},"403":{"description":"Forbidden - Invalid or missing service authorization token"},"500":{"description":"Internal server error"}},"summary":"Checks the eligibility for a given property postcode","tags":["Testing Support"]}},"/testing-support/db-scheduler-test":{"post":{"description":"Schedules a Hello World task to be executed after a specified delay. This endpoint is used for testing the database scheduler functionality.","operationId":"scheduleHelloWorldTask","parameters":[{"description":"Delay in seconds before task execution (default: 1)","example":5,"in":"query","name":"delaySeconds","required":false,"schema":{"type":"integer","format":"int32","default":1}},{"description":"Bearer token for user authentication (default: DummyId)","example":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...","in":"header","name":"Authorization","required":false,"schema":{"type":"string","default":"DummyId"}},{"description":"Service-to-Service (S2S) authorization token","example":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...","in":"header","name":"ServiceAuthorization","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"*/*":{"schema":{"type":"string"}}},"description":"Task scheduled successfully"},"401":{"content":{"*/*":{"schema":{"type":"string"}}},"description":"Unauthorized - Invalid or missing authorization token"},"403":{"content":{"*/*":{"schema":{"type":"string"}}},"description":"Forbidden - Invalid or missing service authorization token"},"500":{"content":{"*/*":{"schema":{"type":"string"}}},"description":"Internal server error"}},"summary":"Schedule a Hello World task","tags":["Testing Support"]}},"/testing-support/generate-document":{"post":{"description":"Generates a document by sending a request to the Doc Assembly service with template ID and form payload. Returns the URL of the generated document.","operationId":"generateDocument","parameters":[{"description":"Bearer token for user authentication","example":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...","in":"header","name":"Authorization","required":true,"schema":{"type":"string"}},{"description":"Service-to-Service (S2S) authorization token","example":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...","in":"header","name":"ServiceAuthorization","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/JsonNode"}}},"required":true},"responses":{"201":{"content":{"*/*":{"schema":{"type":"string"}}},"description":"Document generated successfully"},"400":{"content":{"*/*":{"schema":{"type":"string"}}},"description":"Bad request - formPayload is required"},"401":{"content":{"*/*":{"schema":{"type":"string"}}},"description":"Unauthorized - Invalid or missing authorization token"},"403":{"content":{"*/*":{"schema":{"type":"string"}}},"description":"Forbidden - Invalid or missing service authorization token"},"500":{"content":{"*/*":{"schema":{"type":"string"}}},"description":"Internal server error"}},"summary":"Generate a document using Doc Assembly API","tags":["Testing Support"]}},"/testing-support/pins/{caseReference}":{"get":{"operationId":"getPins","parameters":[{"description":"Service-to-Service (S2S) authorization token","example":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...","in":"header","name":"ServiceAuthorization","required":true,"schema":{"type":"string"}},{"description":"Case reference to find pins for","in":"path","name":"caseReference","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"content":{"*/*":{"schema":{"type":"object","additionalProperties":{"$ref":"#/components/schemas/Party"}}}},"description":"Pins Returned"},"403":{"content":{"*/*":{"schema":{"type":"object","additionalProperties":{"$ref":"#/components/schemas/Party"}}}},"description":"Forbidden - Invalid or missing service authorization token"},"404":{"content":{"*/*":{"schema":{"type":"object","additionalProperties":{"$ref":"#/components/schemas/Party"}}}},"description":"Case not found"},"500":{"content":{"*/*":{"schema":{"type":"object","additionalProperties":{"$ref":"#/components/schemas/Party"}}}},"description":"Internal server error"}},"summary":"Get all pins associated with a case","tags":["Testing Support"]}},"/testing-support/send-email":{"post":{"operationId":"sendEmail","parameters":[{"in":"header","name":"Authorization","required":false,"schema":{"type":"string","default":"DummyId"}},{"in":"header","name":"ServiceAuthorization","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailNotificationRequest"}}},"required":true},"responses":{"200":{"content":{"*/*":{"schema":{"$ref":"#/components/schemas/EmailNotificationResponse"}}},"description":"OK"}},"tags":["notify-controller"]}},"/testing-support/{legislativeCountry}/create-case":{"post":{"description":"Testing support endpoint that orchestrates the CCD calls required to create a case.","operationId":"createPCSCaseViaTestingSupport","parameters":[{"in":"path","name":"legislativeCountry","required":true,"schema":{"type":"string"}},{"in":"header","name":"Authorization","required":true,"schema":{"type":"string"}},{"in":"header","name":"ServiceAuthorization","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/JsonNode"}}}},"responses":{"201":{"content":{"application/json":{"schema":{"type":"object","additionalProperties":{}}}},"description":"Case created successfully"},"400":{"content":{"application/json":{"schema":{"type":"object","additionalProperties":{}}}},"description":"Bad request - invalid payload"},"401":{"content":{"application/json":{"schema":{"type":"object","additionalProperties":{}}}},"description":"Unauthorized - Invalid or missing authorization token"},"403":{"content":{"application/json":{"schema":{"type":"object","additionalProperties":{}}}},"description":"Forbidden - Invalid or missing service authorization token"},"500":{"content":{"application/json":{"schema":{"type":"object","additionalProperties":{}}}},"description":"Internal server error"}},"summary":"Create a PCS case via testing support","tags":["Testing Support"]}}},"components":{"schemas":{"AddressUK":{"type":"object","properties":{"AddressLine1":{"type":"string"},"AddressLine2":{"type":"string"},"AddressLine3":{"type":"string"},"Country":{"type":"string"},"County":{"type":"string"},"PostCode":{"type":"string"},"PostTown":{"type":"string"}}},"Attendee":{"type":"object","properties":{"hearingSubChannel":{"type":"string"},"partyID":{"type":"string"}}},"CaseCategory":{"type":"object","properties":{"categoryParent":{"type":"string"},"categoryType":{"type":"string"},"categoryValue":{"type":"string"}}},"CaseDetails":{"type":"object","properties":{"caseAdditionalSecurityFlag":{"type":"boolean"},"caseCategories":{"type":"array","items":{"$ref":"#/components/schemas/CaseCategory"}},"caseDeepLink":{"type":"string"},"caseInterpreterRequiredFlag":{"type":"boolean"},"caseManagementLocationCode":{"type":"string"},"caseRef":{"type":"string"},"caseSLAStartDate":{"type":"string","format":"date"},"caserestrictedFlag":{"type":"boolean"},"externalCaseReference":{"type":"string"},"hmctsInternalCaseName":{"type":"string"},"hmctsServiceCode":{"type":"string"},"publicCaseName":{"type":"string"}}},"CaseHearing":{"type":"object","properties":{"hearingChannels":{"type":"array","items":{"type":"string"}},"hearingDaySchedule":{"type":"array","items":{"$ref":"#/components/schemas/HearingDaySchedule"}},"hearingGroupRequestId":{"type":"string"},"hearingID":{"type":"integer","format":"int64"},"hearingIsLinkedFlag":{"type":"boolean"},"hearingListingStatus":{"type":"string"},"hearingRequestDateTime":{"type":"string","format":"date-time"},"hearingType":{"type":"string"},"hmcStatus":{"type":"string"},"lastResponseReceivedDateTime":{"type":"string","format":"date-time"},"listAssistCaseStatus":{"type":"string"},"requestVersion":{"type":"integer","format":"int32"}}},"DashboardNotification":{"type":"object","properties":{"templateId":{"type":"string","description":"ID of notification message template","examples":["Notice.AAA3.ClaimIssue.ClaimFee.Required"]},"templateValues":{"type":"object","additionalProperties":{},"description":"Template values for substitution","examples":["     {\n        \"appointmentTime\": \"2025-05-20T10:30:00Z\",\n        \"location\": \"London\",\n        \"amount\": 76.15,\n        \"dueDate\": \"2025-05-14\"\n     }\n"]}}},"DeleteHearingRequest":{"type":"object","properties":{"cancellationReasonCodes":{"type":"array","items":{"type":"string"}}}},"EmailNotificationRequest":{"type":"object","properties":{"emailAddress":{"type":"string"},"emailReplyToId":{"type":"string"},"personalisation":{"type":"object","additionalProperties":{}},"reference":{"type":"string"},"templateId":{"type":"string"}}},"EmailNotificationResponse":{"type":"object","properties":{"notificationId":{"type":"string","format":"uuid"},"status":{"type":"string"},"taskId":{"type":"string"}}},"GetHearingsResponse":{"type":"object","properties":{"caseHearings":{"type":"array","items":{"$ref":"#/components/schemas/CaseHearing"}},"caseRef":{"type":"string"},"hmctsServiceCode":{"type":"string"}}},"HearingDaySchedule":{"type":"object","properties":{"attendees":{"type":"array","items":{"$ref":"#/components/schemas/Attendee"}},"hearingEndDateTime":{"type":"string","format":"date-time"},"hearingJudgeId":{"type":"string"},"hearingRoomId":{"type":"string"},"hearingStartDateTime":{"type":"string","format":"date-time"},"hearingVenueId":{"type":"string"},"listAssistSessionID":{"type":"string"},"panelMemberIds":{"type":"array","items":{"type":"string"}}}},"HearingDetails":{"type":"object","properties":{"amendReasonCodes":{"type":"array","items":{"type":"string"}},"autolistFlag":{"type":"boolean"},"duration":{"type":"integer","format":"int32"},"facilitiesRequired":{"type":"array","items":{"type":"string"}},"hearingChannels":{"type":"array","items":{"type":"string"}},"hearingInWelshFlag":{"type":"boolean"},"hearingIsLinkedFlag":{"type":"boolean"},"hearingLocations":{"type":"array","items":{"$ref":"#/components/schemas/HearingLocation"}},"hearingPriorityType":{"type":"string"},"hearingRequester":{"type":"string"},"hearingType":{"type":"string"},"hearingWindow":{"$ref":"#/components/schemas/HearingWindow"},"leadJudgeContractType":{"type":"string"},"listingAutoChangeReasonCode":{"type":"string"},"listingComments":{"type":"string"},"multiDayHearing":{"type":"boolean"},"nonStandardHearingDurationReasons":{"type":"array","items":{"type":"string"}},"numberOfPhysicalAttendees":{"type":"integer","format":"int32"},"panelRequirements":{"$ref":"#/components/schemas/PanelRequirements"},"privateHearingRequiredFlag":{"type":"boolean"}}},"HearingLocation":{"type":"object","properties":{"locationId":{"type":"string"},"locationType":{"type":"string"}}},"HearingRequest":{"type":"object","properties":{"caseDetails":{"$ref":"#/components/schemas/CaseDetails"},"hearingDetails":{"$ref":"#/components/schemas/HearingDetails"},"partyDetails":{"type":"array","items":{"$ref":"#/components/schemas/PartyDetails"}},"requestDetails":{"$ref":"#/components/schemas/RequestDetails"}}},"HearingResponse":{"type":"object","properties":{"hearingRequestID":{"type":"integer","format":"int64"},"partiesNotified":{"type":"string","format":"date-time"},"requestVersion":{"type":"integer","format":"int32"},"responseVersion":{"type":"integer","format":"int32"},"serviceData":{"type":"object","additionalProperties":{}},"status":{"type":"string"},"timeStamp":{"type":"string","format":"date-time"},"versionNumber":{"type":"integer","format":"int32"}}},"HearingWindow":{"type":"object","properties":{"dateRangeEnd":{"type":"string","format":"date"},"dateRangeStart":{"type":"string","format":"date"},"firstDateTimeMustBe":{"type":"string","format":"date-time"}}},"IndividualDetails":{"type":"object","properties":{"custodyStatus":{"type":"string"},"firstName":{"type":"string"},"hearingChannelEmail":{"type":"array","items":{"type":"string"}},"hearingChannelPhone":{"type":"array","items":{"type":"string"}},"interpreterLanguage":{"type":"string"},"lastName":{"type":"string"},"otherReasonableAdjustmentDetails":{"type":"string"},"preferredHearingChannel":{"type":"string"},"reasonableAdjustments":{"type":"array","items":{"type":"string"}},"relatedParties":{"type":"array","items":{"$ref":"#/components/schemas/RelatedParty"}},"title":{"type":"string"},"vulnerabilityDetails":{"type":"string"},"vulnerableFlag":{"type":"boolean"}}},"JsonNode":{"description":"Document generation request containing template ID and form data"},"OrganisationDetails":{"type":"object","properties":{"cftOrganisationID":{"type":"string"},"name":{"type":"string"},"organisationType":{"type":"string"}}},"PanelPreference":{"type":"object","properties":{"memberID":{"type":"string"},"memberType":{"type":"string"},"requirementType":{"type":"string"}}},"PanelRequirements":{"type":"object","properties":{"authorisationSubType":{"type":"array","items":{"type":"string"}},"authorisationTypes":{"type":"array","items":{"type":"string"}},"panelPreferences":{"type":"array","items":{"$ref":"#/components/schemas/PanelPreference"}},"panelSpecialisms":{"type":"array","items":{"type":"string"}},"roleType":{"type":"array","items":{"type":"string"}}}},"Party":{"type":"object","properties":{"address":{"$ref":"#/components/schemas/AddressUK"},"addressKnown":{"type":"string","enum":["YES","NO"]},"addressSameAsProperty":{"type":"string","enum":["YES","NO"]},"emailAddress":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"},"nameKnown":{"type":"string","enum":["YES","NO"]},"orgName":{"type":"string"},"phoneNumber":{"type":"string"},"phoneNumberProvided":{"type":"string","enum":["YES","NO"]}}},"PartyDetails":{"type":"object","properties":{"individualDetails":{"$ref":"#/components/schemas/IndividualDetails"},"organisationDetails":{"$ref":"#/components/schemas/OrganisationDetails"},"partyChannelSubType":{"type":"string"},"partyID":{"type":"string"},"partyRole":{"type":"string"},"partyType":{"type":"string"},"unavailabilityDOW":{"type":"array","items":{"$ref":"#/components/schemas/UnavailabilityDow"}},"unavailabilityRanges":{"type":"array","items":{"$ref":"#/components/schemas/UnavailabilityRanges"}}}},"RelatedParty":{"type":"object","properties":{"relatedPartyID":{"type":"string"},"relationshipType":{"type":"string"}}},"RequestDetails":{"type":"object","properties":{"versionNumber":{"type":"integer","format":"int32"}}},"Task":{"type":"object","properties":{"status":{"type":"string"},"templateId":{"type":"string"},"templateValues":{"type":"object","additionalProperties":{}}}},"TaskGroup":{"type":"object","properties":{"groupId":{"type":"string"},"tasks":{"type":"array","items":{"$ref":"#/components/schemas/Task"}}}},"UnavailabilityDow":{"type":"object","properties":{"DOW":{"type":"string"},"DOWUnavailabilityType":{"type":"string"}}},"UnavailabilityRanges":{"type":"object","properties":{"unavailabilityType":{"type":"string"},"unavailableFromDate":{"type":"string","format":"date"},"unavailableToDate":{"type":"string","format":"date"}}},"UpdateHearingRequest":{"type":"object","properties":{"caseDetails":{"$ref":"#/components/schemas/CaseDetails"},"hearingDetails":{"$ref":"#/components/schemas/HearingDetails"},"partyDetails":{"type":"array","items":{"$ref":"#/components/schemas/PartyDetails"}},"requestDetails":{"$ref":"#/components/schemas/RequestDetails"}}},"ValidateAccessCodeRequest":{"type":"object","properties":{"accessCode":{"type":"string","maxLength":12,"minLength":12}},"required":["accessCode"]}},"securitySchemes":{"AuthorizationToken":{"bearerFormat":"JWT","in":"header","name":"Authorization","scheme":"bearer","type":"http"},"ServiceAuthorization":{"in":"header","name":"ServiceAuthorization","type":"apiKey"}}}}
