{"swagger":"2.0","info":{"description":"Api Documentation","version":"1.0","title":"Api Documentation","termsOfService":"urn:tos","contact":{},"license":{"name":"Apache 2.0","url":"http://www.apache.org/licenses/LICENSE-2.0"}},"host":"localhost:8800","basePath":"/","tags":[{"name":"draft-controller","description":"Draft Controller"},{"name":"report-controller","description":"Report Controller"}],"paths":{"/drafts":{"get":{"tags":["draft-controller"],"summary":"Find all your drafts","description":"Returns an empty array when no drafts were found","operationId":"readAllUsingGET","produces":["application/json","application/vnd.uk.gov.hmcts.draft-store.v3+json"],"parameters":[{"name":"Authorization","in":"header","description":"Authorization","required":true,"type":"string"},{"name":"Secret","in":"header","description":"Secret","required":true,"type":"string"},{"name":"ServiceAuthorization","in":"header","description":"ServiceAuthorization","required":true,"type":"string"},{"name":"after","in":"query","description":"after","required":false,"type":"integer","format":"int32"},{"name":"limit","in":"query","description":"limit","required":false,"type":"integer","default":10,"format":"int32"}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/DraftList"}}},"deprecated":false},"post":{"tags":["draft-controller"],"summary":"Create a new draft","operationId":"createUsingPOST","consumes":["application/json","application/vnd.uk.gov.hmcts.draft-store.v3+json"],"produces":["application/json","application/vnd.uk.gov.hmcts.draft-store.v3+json"],"parameters":[{"name":"Authorization","in":"header","description":"Authorization","required":true,"type":"string"},{"name":"Secret","in":"header","description":"Secret","required":true,"type":"string"},{"name":"ServiceAuthorization","in":"header","description":"ServiceAuthorization","required":true,"type":"string"},{"in":"body","name":"newDraft","description":"newDraft","required":true,"schema":{"$ref":"#/definitions/CreateDraft"}}],"responses":{"200":{"description":"OK"},"201":{"description":"Draft successfully created"},"400":{"description":"Bad request","schema":{"$ref":"#/definitions/ErrorResult"}}},"deprecated":false},"delete":{"tags":["draft-controller"],"summary":"Delete all drafts","operationId":"deleteAllUsingDELETE","produces":["application/json","application/vnd.uk.gov.hmcts.draft-store.v3+json"],"parameters":[{"name":"Authorization","in":"header","description":"Authorization","required":true,"type":"string"},{"name":"ServiceAuthorization","in":"header","description":"ServiceAuthorization","required":true,"type":"string"}],"responses":{"200":{"description":"OK"},"204":{"description":"Drafts deleted"}},"deprecated":false}},"/drafts/{id}":{"get":{"tags":["draft-controller"],"summary":"Find draft by ID","operationId":"readUsingGET","produces":["application/json","application/vnd.uk.gov.hmcts.draft-store.v3+json"],"parameters":[{"name":"Authorization","in":"header","description":"Authorization","required":true,"type":"string"},{"name":"Secret","in":"header","description":"Secret","required":true,"type":"string"},{"name":"ServiceAuthorization","in":"header","description":"ServiceAuthorization","required":true,"type":"string"},{"name":"id","in":"path","description":"id","required":true,"type":"string"}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/Draft"}},"404":{"description":"Not found","schema":{"$ref":"#/definitions/ErrorResult"}}},"deprecated":false},"put":{"tags":["draft-controller"],"summary":"Update existing draft","operationId":"updateUsingPUT","consumes":["application/json","application/vnd.uk.gov.hmcts.draft-store.v3+json"],"produces":["application/json","application/vnd.uk.gov.hmcts.draft-store.v3+json"],"parameters":[{"name":"Authorization","in":"header","description":"Authorization","required":true,"type":"string"},{"name":"Secret","in":"header","description":"Secret","required":true,"type":"string"},{"name":"ServiceAuthorization","in":"header","description":"ServiceAuthorization","required":true,"type":"string"},{"name":"id","in":"path","description":"id","required":true,"type":"string"},{"in":"body","name":"updatedDraft","description":"updatedDraft","required":true,"schema":{"$ref":"#/definitions/UpdateDraft"}}],"responses":{"200":{"description":"OK"},"204":{"description":"Draft updated"},"400":{"description":"Bad request","schema":{"$ref":"#/definitions/ErrorResult"}},"404":{"description":"Not found","schema":{"$ref":"#/definitions/ErrorResult"}}},"deprecated":false},"delete":{"tags":["draft-controller"],"summary":"Delete draft","operationId":"deleteUsingDELETE","produces":["application/json","application/vnd.uk.gov.hmcts.draft-store.v3+json"],"parameters":[{"name":"Authorization","in":"header","description":"Authorization","required":true,"type":"string"},{"name":"ServiceAuthorization","in":"header","description":"ServiceAuthorization","required":true,"type":"string"},{"name":"id","in":"path","description":"id","required":true,"type":"string"}],"responses":{"200":{"description":"OK"},"204":{"description":"Draft deleted"}},"deprecated":false}},"/reports/{userId}":{"get":{"tags":["report-controller"],"summary":"Report draft document type counts for a user","operationId":"getDocumentTypeCountsUsingGET","produces":["application/json"],"parameters":[{"name":"Authorization","in":"header","description":"Authorization","required":true,"type":"string"},{"name":"userId","in":"path","description":"userId","required":true,"type":"string"}],"responses":{"200":{"description":"OK","schema":{"type":"object","additionalProperties":{"type":"integer","format":"int32"}}}},"deprecated":false}}},"definitions":{"CreateDraft":{"type":"object","properties":{"document":{"$ref":"#/definitions/JsonNode"},"maxStaleDays":{"type":"integer","format":"int32","description":"Number of days before removing a draft that hasn't been updated"},"type":{"type":"string"},"max_age":{"type":"integer","format":"int32"}},"title":"CreateDraft"},"Draft":{"type":"object","properties":{"created":{"type":"string","format":"date-time"},"document":{"type":"string"},"id":{"type":"string"},"type":{"type":"string"},"updated":{"type":"string","format":"date-time"}},"title":"Draft"},"DraftList":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/definitions/Draft"}},"paging_cursors":{"$ref":"#/definitions/PagingCursors"}},"title":"DraftList"},"ErrorResult":{"type":"object","properties":{"errorCode":{"type":"string","enum":["INVALID_AUTH_TOKEN","INVALID_SERVICE_AUTH_TOKEN","BAD_ARGUMENT","NO_RECORD_FOUND","SERVER_ERROR","USER_DETAILS_SERVICE_ERROR"]},"errors":{"type":"array","items":{"type":"string"}}},"title":"ErrorResult"},"JsonNode":{"type":"object","properties":{"array":{"type":"boolean"},"bigDecimal":{"type":"boolean"},"bigInteger":{"type":"boolean"},"binary":{"type":"boolean"},"boolean":{"type":"boolean"},"containerNode":{"type":"boolean"},"double":{"type":"boolean"},"float":{"type":"boolean"},"floatingPointNumber":{"type":"boolean"},"int":{"type":"boolean"},"integralNumber":{"type":"boolean"},"long":{"type":"boolean"},"missingNode":{"type":"boolean"},"nodeType":{"type":"string","enum":["ARRAY","BINARY","BOOLEAN","MISSING","NULL","NUMBER","OBJECT","POJO","STRING"]},"null":{"type":"boolean"},"number":{"type":"boolean"},"object":{"type":"boolean"},"pojo":{"type":"boolean"},"short":{"type":"boolean"},"textual":{"type":"boolean"},"valueNode":{"type":"boolean"}},"title":"JsonNode"},"PagingCursors":{"type":"object","properties":{"after":{"type":"string"}},"title":"PagingCursors"},"UpdateDraft":{"type":"object","properties":{"document":{"$ref":"#/definitions/JsonNode"},"type":{"type":"string"}},"title":"UpdateDraft"}}}
